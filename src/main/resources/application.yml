spring:
  profiles:
    active: default

server:
  port: 80

---

spring:
  application:
    name: spring-cloud-gateway-demo
  config:
    import: "configserver:"
    activate:
      on-profile:
        - default
  cloud:
    config:
      uri: http://localhost:10081
      name: spring-cloud-gateway-demo
      profile: dev
      fail-fast: true
      retry:
        max-attempts: 10
    gateway:
      default-filters:
        - StripPrefix=1

---

server:
  port: 80

spring:
  application:
    name: spring-cloud-gateway-demo
  config:
    activate:
      on-profile:
        - standalone
  cloud:
    config:
      enabled: false
      uri: http://localhost:10081
      name: spring-cloud-gateway-demo
      profile: dev
      fail-fast: true
      retry:
        max-attempts: 10
    gateway:
      default-filters:
        - StripPrefix=1
      routes:
        - id: spring-webflux-demo
          uri: lb://webflux-demo
          predicates:
            - "Path=/webflux-demo/**"
    discovery:
      client:
        simple:
          instances:
            webflux-demo:
              - uri: http://localhost:30080
              - uri: http://localhost:30081
